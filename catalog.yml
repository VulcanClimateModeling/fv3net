plugins:
  source:
    - module: intake_xarray
sources:
  2019-07-17-GFDL_FV3_DYAMOND_0.25deg_15minute_2d:
    description: Initial data sample provided by Lucas Harris. 1 day of 2D fields sampled every 15 minutes.
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: 'gcs://vcm-ml-data/2019-07-17-GFDL_FV3_DYAMOND_0.25deg_15minute/2d.zarr'

  2019-08-12-james-huff-additional-gfdl-fields:
    description: Vertical coordinate information provided on 2019-08-12 by James Huff.
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: 'gcs://vcm-ml-data/2019-08-12-james-huff-additional-gfdl-fields.zarr'


  2019-07-17-GFDL_FV3_DYAMOND_0.25deg_3hr_3d:
    description: Initial data sample provided by Lucas Harris. 1 day of 3D fields sampled every 3 hours.
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: 'gcs://vcm-ml-data/2019-07-17-GFDL_FV3_DYAMOND_0.25deg_15minute/3d.zarr'

  marat_sam_tend:
    description: Initial data sample provided by Lucas Harris. 1 day of 3D fields sampled every 3 hours.
    driver: netcdf
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: 'gcs://vcm-ml-data/2019-08-02-MaratGlobalSAM/TEND/*.nc'

  2019-09-10-GFDL-SHiELD-15-minute-2-days:
    description: 2D and 3D data sampled every 15 minutes from a 2-day 3-km simulation, regridded to a roughly 0.25 degree x 0.25 degree regular lat-lon grid.
    driver: zarr
    metadata:
      data_transforms:
        - _rename_SHiELD_varnames_to_orig
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: 'gcs://vcm-ml-data/2019-09-10-GFDL-SHiELD-15-minute-2-days.zarr'

  2019-09-24-GFDL-SHiELD-15-minute-2-days_regrid_1degree:
    description: 2D and 3D data sampled every 15 minutes from a 2-day 3-km simulation, regridded to a roughly 1.0 degree x 1.0 degree regular lat-lon grid.
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: 'gcs://vcm-ml-data/2019-09-24_GFDL-SHiELD-15-minute-2-days_regrid_1degree.zarr'

  2019-10-09-SAM-SOCRATES_tend_9216x4608x74_7.5s_4km_nudge24h:
    description: 5 day forecast for SOCRATES with 24 hour nudging to ERA5, with bug fixes for tendency calculations, from Marat Khairoutdinov.
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: 'gcs://vcm-ml-data/2019-10-09-SAM-SOCRATES_tend_9216x4608x74_7.5s_4km_nudge24h.zarr'

  40day_c384_diags_time_avg:
    description: Time-averaged diagnostics for 40-day nudged simulation at C384 resolution
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: 'gs://vcm-ml-data/2019-12-05-40-day-X-SHiELD-simulation-C384-diagnostics/gfsphysics_15min_coarse.zarr/'

  40day_c384_diag_atmos_avg:
    description: Time-averaged atmos diagnostics from the 40-day nudged simulation
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: 'gs://vcm-ml-data/2019-12-05-40-day-X-SHiELD-simulation-C384-diagnostics/atmos_15min_coarse_ave.zarr/'

  40day_1deg_atmos_8xdaily:
    description: Instantaneous 8x daily atmospheric diagnostics from the 40 day run on a lat lon grid
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: 'gs://vcm-ml-data/2019-12-12-40-day-X-SHiELD-simulation-regridded-diagnostics/atmos_8xdaily_1_degree.zarr/'


  40day_c384_atmos_8xdaily:
    description: Instantaneous 8x daily atmospheric diagnostics from the 40 day run on a C384 grid
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: "gs://vcm-ml-data/2020-02-25-additional-november-C3072-simulation-C384-diagnostics/atmos_8xdaily_C3072_to_C384.zarr"
      
  40day_c384_diags_time_avg_may2020:
    description: Time-averaged diagnostics for 40-day nudged simulation at C384 resolution (May 27 2020 SHiELD)
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: 'gs://vcm-ml-raw/2020-05-27-40-day-X-SHiELD-simulation-C384-diagnostics/gfsphysics_15min_coarse.zarr/'
      consolidated: True

  40day_c384_diag_atmos_avg_may2020:
    description: Time-averaged atmos diagnostics from the 40-day nudged simulation (May 27 2020 SHiELD)
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: 'gs://vcm-ml-raw/2020-05-27-40-day-X-SHiELD-simulation-C384-diagnostics/atmos_15min_coarse_ave.zarr/'
      consolidated: True

  40day_1deg_atmos_15min_may2020:
    description: Instantaneous 8x daily atmospheric diagnostics from the 40 day run on a lat lon grid (May 27 2020 SHiELD)
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: 'gs://vcm-ml-raw/2020-05-27-40-day-X-SHiELD-simulation-regridded-diagnostics/atmos_15min_coarse_inst_1_degree.zarr/'
      consolidated: True

  40day_c384_atmos_8xdaily_may2020:
    description: Instantaneous 8x daily atmospheric diagnostics from the 40 day run on a C384 grid (May 27 2020 SHiELD)
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: "gs://vcm-ml-raw/2020-05-27-40-day-X-SHiELD-simulation-C384-diagnostics/atmos_8xdaily_C3072_to_C384.zarr"
      consolidated: True
      
  40day_c48_gfsphysics_15min_may2020:
    description: 2D physics diagnostics variables from 40-day nudged simulation (May 27 2020 SHiELD), coarsened to C48 resolution and rechunked to 96 15-minute timesteps (1 day) per chunk
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: "gs://vcm-ml-experiments/2020-06-17-triad-round-1/coarsen-c384-diagnostics/coarsen_diagnostics/gfsphysics_15min_coarse.zarr"
      consolidated: True

  GFS_analysis_T85_2015_2016:
    description: 4x daily GFS analysis data at approximately 2deg resolution, typically used for nudging FV3GFS. Spans 2015-01-01T00:00:00 to 2017-01-01T00:00:00.
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: "gs://vcm-ml-data/2020-03-27-T85-GFS-nudging-data-as-zarr/nudging_data_2015-2016.zarr"

  GFS_analysis_T85_2015_2016_1M_mean:
    description: Monthly mean GFS analysis data at approximately 2deg resolution. Spans 2015-01 to 2016-12.
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: "gs://vcm-ml-data/2020-03-27-T85-GFS-nudging-data-as-zarr/nudging_data_mean_1M.zarr"

  grid/c48:
    description: Lat, lon, and area of C48 data
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: "gs://vcm-ml-data/latLonArea/c48/c48.zarr/"

  landseamask/c48:
    description: land_sea_mask of C48 data
    driver: zarr
    args:
      storage_options:
        project: 'vcm-ml'
        access: read_only
      urlpath: "gs://vcm-ml-data/latLonArea/c48/land_sea_mask.zarr/"

  ## Local Data Intake ##
  # TODO: Could this be replicated with intake caching? Or switch to an ignored file?
  local_2019-09-24-GFDL-SHiELD-15-minute-2-days_regrid_1degree:
    description: Local version of 2D and 3D SHieLD data at 1 degree resolution
    driver: zarr
    args:
      urlpath: '{{ CATALOG_DIR }}/data/interim/2019-09-24_GFDL-SHiELD-15-minute-2-days_regrid_1degree.zarr'

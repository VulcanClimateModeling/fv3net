variables:
    - dQ1
    - dQ2
    - pQ1
    - pQ2
    - pressure_thickness_of_atmospheric_layer
sources:
  one_step_tendencies: 
    path: gs://vcm-ml-experiments/2020-05-07-clouds-off-training-data/create-clouds-off-data/create_training_data/train
    batch_function: diagnostic_sequence_from_mapper
    batch_kwargs:
      num_batches: 2
      timesteps_per_batch: 1
      init_time_dim_name: "initial_time"
      mapping_function: open_one_step
  nudging_tendencies: 
    path: gs://vcm-ml-data/mcgibbon-testing
    batch_function: diagnostic_sequence_from_mapper
    batch_kwargs:
      num_batches: 2
      timesteps_per_batch: 1
      init_time_dim_name: "initial_time"
      mapping_function: open_nudged_tendencies
      mapping_kwargs:
        nudging_timescale_hr: 3
        open_nudged_kwargs:
          rename_vars:
            air_temperature_tendency_due_to_nudging: dQ1
            specific_humidity_tendency_due_to_nudging: dQ2
  fine_res_apparent_sources: 
  #   path: gs://vcm-ml-experiments/2020-06-02-fine-res/fine_res_budget
  #   path: gs://vcm-ml-scratch/noah/2020-05-27
    path: /home/brianh/dev/fv3net/data/fine_res_budget
    rename_variables:
      delp: pressure_thickness_of_atmospheric_layer
      pfull: z
      grid_xt: x
      grid_yt: y
    batch_function: diagnostic_sequence_from_mapper
    batch_kwargs:
      num_batches: 2
      timesteps_per_batch: 1
      init_time_dim_name: "initial_time"
      mapping_function: open_fine_res_apparent_sources
# this is only for development purposes and integration with visual studio code
version: '3.4'
services:
  offline_bptt:
    build:
      context: "../../"
      # dockerfile is relative to context
      dockerfile: "workflows/offline_bptt/Dockerfile"
      target: bld
    volumes:
      - ../../external/vcm:/external/vcm
      - ../../external/loaders:/external/loaders
      - ../../external/synth:/external/synth
      - ../../external/fv3fit:/fv3fit
      - ../../external/fv3gfs-util:/external/fv3gfs-util
      - ../../constraints.txt:/external/constraints.txt
      - ../../workflows/offline_bptt:/workflows/offline_bptt
      - ${GOOGLE_APPLICATION_CREDENTIALS}:${GOOGLE_APPLICATION_CREDENTIALS}
    environment:
      - GOOGLE_APPLICATION_CREDENTIALS

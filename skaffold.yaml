apiVersion: skaffold/v2beta8
kind: Config
build:
  local:
    useBuildkit: true
    push: true
  artifacts:
    - image: prognostic_run
      context: .
      docker: 
        dockerfile: docker/prognostic_run/Dockerfile
        secret:
          id: gcp
          src: /home/noahb/keys/key.json
    - image: fv3fit
      context: .
      docker: 
        dockerfile: docker/fv3fit/Dockerfile
    - image: fv3net
      context: .
      docker: 
        dockerfile: docker/fv3net/Dockerfile
    - image: post_process_run
      context: workflows/post_process_run
deploy:
  kubeContext: docker-desktop
  kubectl:
    manifests:
      - job-with-volume.yaml
# portForward:
#   - resourceType: deployment
#     resourceName: leeroy-web
#     port: 8080
#     localPort: 9000

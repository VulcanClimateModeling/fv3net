base_version: v0.7
field_table: gs://vcm-fv3config/config/field_table/TKE-EDMF/v1.0/field_table
prephysics:
  - dataset_key: "gs://vcm-ml-intermediate/2021-03-fine-res-surface-radiative-fluxes/C3072-surface-radiative-fluxes-precip.zarr"
    variables:
      - override_for_time_adjusted_total_sky_downward_shortwave_flux_at_surface
      - override_for_time_adjusted_total_sky_downward_longwave_flux_at_surface
      - override_for_time_adjusted_total_sky_net_shortwave_flux_at_surface
      - total_precipitation
initial_conditions:
  base_url: gs://vcm-ml-experiments/2020-06-02-fine-res/coarsen_restarts
  timestep: "20160805.000000"
nudging:
  restarts_path: gs://vcm-ml-experiments/2020-06-02-fine-res/coarsen_restarts
  timescale_hours:
    air_temperature: 3
    specific_humidity: 3
    x_wind: 3
    y_wind: 3
    pressure_thickness_of_atmospheric_layer: 3
namelist:
  atmos_model_nml:
    fhmax: 1024  # max hours of simulation (over all segments) for which fortran physics diags are saved
  coupler_nml:
    days: 5
    hours: 0
    minutes: 0
    months: 0
    seconds: 0
  gfs_physics_nml:
    fhlwr: 1800.0
    fhswr: 1800.0
    override_surface_radiative_fluxes: true
    hybedmf: false
    satmedmf: true
  namsfc:
    faisl: 99999 # Persist land / sea / sea-ice mask from the initial conditions instead of using climatology forcing files
    faiss: 99999 # Persist land / sea / sea-ice mask from the initial conditions instead of using climatology forcing files
    fsicl: 99999 # Persist the sea ice fraction from the initial conditiond instead of using climatology forcing files
    fsics: 99999 # Persist the sea ice fraction from the initial conditiond instead of using climatology forcing files
diagnostics:
- name: state_after_timestep.zarr
  chunks:
    time: 8
  times:
    frequency: 10800
    kind: interval
  variables:
  - air_temperature
  - specific_humidity
  - pressure_thickness_of_atmospheric_layer
  - vertical_thickness_of_atmospheric_layer
  - land_sea_mask
  - total_sky_downward_shortwave_flux_at_surface
  - total_sky_upward_shortwave_flux_at_surface
  - total_sky_downward_longwave_flux_at_surface
  - total_sky_upward_longwave_flux_at_surface
  - total_sky_downward_shortwave_flux_at_top_of_atmosphere
  - total_sky_upward_shortwave_flux_at_top_of_atmosphere
  - total_sky_upward_longwave_flux_at_top_of_atmosphere
  - clear_sky_downward_shortwave_flux_at_surface
  - clear_sky_upward_shortwave_flux_at_surface
  - clear_sky_downward_longwave_flux_at_surface
  - clear_sky_upward_longwave_flux_at_surface
  - clear_sky_upward_shortwave_flux_at_top_of_atmosphere
  - clear_sky_upward_longwave_flux_at_top_of_atmosphere
  - latitude
  - longitude
  - cloud_water_mixing_ratio
  - cloud_ice_mixing_ratio
  - rain_mixing_ratio
  - snow_mixing_ratio
  - graupel_mixing_ratio
  - cloud_amount
  - ozone 
fortran_diagnostics:
- name: sfc_dt_atmos.zarr
  chunks:
    time: 96
  times:
    frequency: 900
    kind: interval
  variables:
  - {module_name: gfs_sfc, field_name: tsfc, output_name: tsfc}
  - {module_name: gfs_sfc, field_name: slmsk, output_name: slmsk}
  - {module_name: gfs_sfc, field_name: snowd, output_name: snowd}
  - {module_name: gfs_sfc, field_name: sncovr, output_name: sncovr}
  - {module_name: gfs_sfc, field_name: snoalb, output_name: snoalb}
  - {module_name: gfs_sfc, field_name: zorl, output_name: zorl}
  - {module_name: gfs_sfc, field_name: hprime, output_name: hprime}
  - {module_name: gfs_sfc, field_name: alvsf, output_name: alvsf}
  - {module_name: gfs_sfc, field_name: alnsf, output_name: alnsf}
  - {module_name: gfs_sfc, field_name: alvwf, output_name: alvwf}
  - {module_name: gfs_sfc, field_name: alnwf, output_name: alnwf}
  - {module_name: gfs_sfc, field_name: facsf, output_name: facsf}
  - {module_name: gfs_sfc, field_name: facwf, output_name: facwf}
  - {module_name: gfs_sfc, field_name: fice, output_name: fice}
  - {module_name: gfs_sfc, field_name: tisfc, output_name: tisfc}
